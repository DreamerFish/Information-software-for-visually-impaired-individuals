"use strict";var e=require("../../common/vendor.js"),t=require("../../utils/request.js");const a={data:()=>({newTime:0,state:!1,audioNesw:"",content:""}),onLoad(e){console.log(JSON.parse(e.content).data.body),this.content=JSON.parse(e.content).data.body,this.backgroundAudio(),this.audio()},methods:{audio(e){console.log("音频获取"),t.post({url:"/voice/OcrToVoice",data:{native_voice_name:"xiaoyan",ocrText:this.content,speed:100,volume:0}}).then((e=>{console.log(e.data.data.data),this.audioNesw=e.data.data.data}))},backgroundAudio(){this.bgAudioManager=e.index.getBackgroundAudioManager(),this.bgAudioManager.startTime=0},bindstate(e){this.state=e,e?(isNaN(this.newTime)&&(this.newTime=0),console.log("播放",this.newTime,this.audioNesw),0!=this.newTime?(this.bgAudioManager.play(),this.newTime=0):(this.bgAudioManager.src=this.audioNesw,this.bgAudioManager.title="读取内容",this.bgAudioManager.singer="暂无",this.bgAudioManager.coverImgUrl="https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-uni-app-doc/7fbf26a0-4f4a-11eb-b680-7980c8a877b8.png",this.newTime=0,this.bgAudioManager.play())):this.bgAudioManager.pause();const t=this;this.bgAudioManager.onTimeUpdate((e=>{t.outTimes()}))},outTimes(){let e=this.bgAudioManager.duration,t=this.bgAudioManager.currentTime;this.newTime=parseInt(parseInt(t)/parseInt(e)*100),this.newTime>=100&&(this.bgAudioManager.startTime=0)},sliderChange(e){console.log(e.detail.value);let t=this.bgAudioManager.duration;this.newTime=e.detail.value,this.bgAudioManager.seek(parseInt(parseInt(t)*parseInt(e.detail.value)/100))}}};var i=e._export_sfc(a,[["render",function(t,a,i,s,n,o){return e.e({a:e.t(n.content),b:n.newTime,c:e.o(((...e)=>o.sliderChange&&o.sliderChange(...e))),d:n.state},n.state?{e:e.o((e=>o.bindstate(!1)))}:{},{f:!n.state},n.state?{}:{g:e.o((e=>o.bindstate(!0)))})}]]);wx.createPage(i);
