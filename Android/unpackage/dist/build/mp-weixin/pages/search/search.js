"use strict";var e=require("../../common/vendor.js");const o={props:{placeholder:{type:String,default:"娱乐，好玩的"}},data:()=>({keyword:"",oldKeywordList:[],hotKeywordList:[],isShowKeywordList:!1,isDelShow:!1,forbid:"",showsearchbtn:!1,searchval:"",target:0}),onLoad(){this.init()},methods:{init(){this.loadOldKeyword(),this.loadHotKeyword()},loadOldKeyword(){e.index.getStorage({key:"OldKeys",success:e=>{var o=JSON.parse(e.data);this.oldKeywordList=o}})},loadHotKeyword(){this.hotKeywordList=["华为手机","苹果电脑","赵丽颖","迪丽热巴","斗破苍穹","巨人国降临","王者","USB","0.1415926"]},inputChange:async function(e){this.keyword.length>0?(console.log(this.keyword.length),this.isDelShow=!0,console.log("大过零")):(this.isDelShow=!1,console.log("不大于零")),(e.detail?e.detail.value:e)?this.isShowKeywordList=!0:this.isShowKeywordList=!1},doSearch(o){""==o?0==this.keyword.length?(console.log("不执行搜索"),e.index.showToast({title:"请输入关键字",icon:"none"})):this.keyword.length>=1&&(console.log("执行了搜索"),o=!1===o?this.keyword:o,this.keyword=o,this.saveKeyword(o),e.index.showToast({title:o,icon:"none",duration:2e3})):""!=o&&(this.keyword=o,console.log("执行了搜索"),o=!1===o?this.keyword:o,this.keyword=o,this.saveKeyword(o),e.index.showToast({title:o,icon:"none",duration:2e3}))},saveKeyword(o){e.index.getStorage({key:"OldKeys",success:t=>{var s=JSON.parse(t.data),i=s.indexOf(o);-1==i||s.splice(i,1),s.unshift(o),s.length>10&&s.pop(),e.index.setStorage({key:"OldKeys",data:JSON.stringify(s)}),this.oldKeywordList=s},fail:t=>{var s=[o];e.index.setStorage({key:"OldKeys",data:JSON.stringify(s)}),this.oldKeywordList=s}})},clear(){console.log(this.keyword),e.index.hideKeyboard(),this.keyword="",this.inputChange(""),console.log("没有"+this.keyword.length+this.keyword)},delete_key(){e.index.showModal({content:"确定清除历史搜索记录？",success:o=>{o.confirm?(this.oldKeywordList=[],e.index.removeStorage({key:"OldKeys"})):o.cancenl&&console.log("用户点击取消")}})},hotToggle(){this.forbid=this.forbid?"":"1"}},watch:{searchval(e){var o=this;o.$emit("inputchange",e),o.showsearchbtn=""!=e},target(e){this.tap(e)}}};if(!Array){e.resolveComponent("uni-icons")()}var t=e._export_sfc(o,[["render",function(o,t,s,i,d,r){return e.e({a:e.p({type:"search",size:"20"}),b:s.placeholder,c:e.o([e=>d.keyword=e.detail.value,(...e)=>r.inputChange&&r.inputChange(...e)]),d:e.o((e=>r.doSearch(!1))),e:e.o((e=>r.doSearch(!1))),f:d.keyword,g:d.isDelShow},d.isDelShow?{h:e.o(r.clear),i:e.p({type:"close",size:"20",color:"#a7a7a7"})}:{},{j:e.o((e=>r.doSearch(!1))),k:e.o(((...e)=>r.delete_key&&r.delete_key(...e))),l:d.oldKeywordList.length>0},d.oldKeywordList.length>0?{m:e.f(d.oldKeywordList,((o,t,s)=>({a:e.t(o),b:e.o((e=>r.doSearch(o))),c:t})))}:{},{n:!d.isShowKeywordList,o:e.n("iconfont icon-yanjing"+d.forbid),p:e.o(((...e)=>r.hotToggle&&r.hotToggle(...e))),q:""==d.forbid},""==d.forbid?{r:e.f(d.hotKeywordList,((o,t,s)=>({a:e.t(o),b:e.o((e=>r.doSearch(o))),c:t})))}:{},{s:!d.isShowKeywordList})}],["__scopeId","data-v-5460041b"]]);wx.createPage(t);
